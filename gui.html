<html>
    <head>
        <title>noobcraft</title>
        <script type="text/javascript"
            src="https://cdn.rawgit.com/brython-dev/brython/3.2.7/www/src/brython.js">
        </script>
    </head>

    <body onload="brython(1)">

        <canvas id="mycanvas" />

        <script type="text/python">
            from browser import document, timer, alert

            from noobcraft.game import Game
            from noobcraft.rendering.renderer import Renderer
            from noobcraft.players.inactiveplayer import InactivePlayer
            from noobcraft.players.aggressiveplayer import AggressivePlayer


            game = Game()
            renderer = Renderer()

            def drawGame():
                canvas = document.getElementById('mycanvas')

                if canvas.getContext is None:
                    alert('You need Safari or Firefox 1.5+ to see this demo.')
                else:
                    ctx = canvas.getContext('2d')
                    ctx.canvas.width  = 800
                    ctx.canvas.height = 600
                    renderer.draw(game, ctx)

            def gameloop():
                timer.set_timeout(gameloop, 20)

                game.update()
                drawGame()

            def gameloopDebug():
                game.update()
                game.update()
                game.update()
                drawGame()

            game.addPlayer(InactivePlayer('Player1', [0, 0, 0]))
            game.addPlayer(AggressivePlayer('Player2', [1, 0, 0]))
            game.addPlayer(AggressivePlayer('Player3', [0, 1, 0]))
            game.addPlayer(AggressivePlayer('Player4', [0, 0, 1]))
            game.addPlayer(InactivePlayer('Player5', [1, 1, 0]))
            game.addPlayer(InactivePlayer('Player6', [1, 0, 1]))
            game.addPlayer(AggressivePlayer('Player7', [0, 1, 1]))
            game.addPlayer(InactivePlayer('Player8', [1, 1, 1]))

            game.start()
            gameloop();
            #gameloopDebug();
        </script>
    </body>
</html>
