<html>
    <head>
        <title>noobcraft</title>
        <script type="text/javascript"
            src="https://cdn.rawgit.com/brython-dev/brython/3.2.7/www/src/brython.js">
        </script>
    </head>

    <body onload="brython(1)">

        <canvas id="mycanvas" />

        <script type="text/python">
            from browser import document, timer, alert

            from noobcraft.game import Game
            from noobcraft.rendering.renderer import Renderer
            from noobcraft.actors.demo import LazyActor, RandomActor, BerserkActor


            game = Game()
            renderer = Renderer()

            def drawGame():
                canvas = document.getElementById('mycanvas')

                if canvas.getContext is None:
                    alert('You need Safari or Firefox 1.5+ to see this demo.')
                else:
                    ctx = canvas.getContext('2d')
                    ctx.canvas.width  = 800
                    ctx.canvas.height = 600
                    renderer.draw(game, ctx)

            def gameloop():
                timer.set_timeout(gameloop, 20)

                game.update()
                drawGame()

            def gameloopDebug():
                game.update()
                game.update()
                game.update()
                drawGame()

            game.addActor(LazyActor())
            game.addActor(RandomActor())
            game.addActor(BerserkActor())

            game.start()
            gameloop();
            #gameloopDebug();
        </script>
    </body>
</html>
